
<!DOCTYPE html>
<!--
 *  Copyright (c) 2015 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
-->
<html>
<head>

    <meta charset="utf-8">
    <meta name="description" content="WebRTC code samples">
    <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1, maximum-scale=1">
    <meta itemprop="description" content="Client-side WebRTC code samples">
    <meta itemprop="image" content="../../../images/webrtc-icon-192x192.png">
    <meta itemprop="name" content="WebRTC code samples">
    <meta name="mobile-web-app-capable" content="yes">
    <meta id="theme-color" name="theme-color" content="#ffffff">
    <link rel='icon' href='favicon.ico' type='image/x-icon'/ >
    
    <style>
        a {
        position: absolute;
        left: 1%;
        top: 1%;
        }
        div {
            overflow:hidden;
            width: 50%;
            height: 100%;
            top: 0px;
           position:absolute;
        }
        
        video {
            width: 100%;
            height: 150%;
        }
    </style>

</head>
<body>
    <a>...</a>
  <div id="layout">
    <span>blur </span><input oninput="update()" autocomplete="off" id="blur" value="0"><br>
    <span>brightness </span><input oninput="update()" autocomplete="off" id="brightness" value="100"><br>
    <span>contrast </span><input oninput="update()" autocomplete="off" id="contrast" value="100"><br>
    <span>grayscale </span><input oninput="update()" autocomplete="off" id="grayscale" value="0"><br>
    <span>hue rotate </span><input oninput="update()" autocomplete="off" id="hueRotate" value="0"><br>
    <span>invert </span><input oninput="update()" autocomplete="off" id="invert" value="0"><br>
    <span>saturate </span><input oninput="update()" autocomplete="off" id="saturate" value="100"><br>
    <span>sepia </span><input oninput="update()" autocomplete="off" id="sepia" value="0"><br>
    
    <span>rotate </span><input oninput="update()" autocomplete="off" id="rotate" value="0"><br>
    <span>scale x </span><input oninput="update()" autocomplete="off" id="scaleX" value="1"><br>
    <span>scale y </span><input oninput="update()" autocomplete="off" id="scaleY" value="1"><br>
    <span>translate x </span><input oninput="update()" autocomplete="off" id="translateX" value="0"><br>
    <span>translate y </span><input oninput="update()" autocomplete="off" id="translateY" value="0"><br>
    <span>skew x </span><input oninput="update()" autocomplete="off" id="skewX" value="0"><br>
    <span>skew y </span><input oninput="update()" autocomplete="off" id="skewY" value="0"><br>
   </div>
    

<div style="left:0px">
    <video playsinline autoplay id="1"></video>
</div>
<div style="right:0px">
    <video playsinline autoplay id="2"></video>
</div>
  <script>
/*
 *  Copyright (c) 2015 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
// Put variables in global scope to make them available to the browser console.
const video1 = window.video = document.getElementById('1');
const video2 = window.video = document.getElementById('2');
const constraints = {
  audio: false,
    video: {
        frameRate: { min: 45 },
        facingMode: "environment"
    }
};
function handleSuccess(stream) {
  window.stream = stream; // make stream available to browser console
  video1.srcObject = stream;
  video2.srcObject = stream;
}
function handleError(error) {
  console.log('navigator.MediaDevices.getUserMedia error: ', error.message, error.name);
}
var i = 0;

setInterval(function(){
i++;
var blur = eval(document.getElementById('blur').value),
    brightness = eval(document.getElementById('brightness').value),
    contrast = eval(document.getElementById('contrast').value),
    grayscale = eval(document.getElementById('grayscale').value),
    hueRotate = eval(document.getElementById('hueRotate').value),
    invert = eval(document.getElementById('invert').value),
    saturate = eval(document.getElementById('saturate').value),
    sepia = eval(document.getElementById('sepia').value),
    rotate = eval(document.getElementById('rotate').value),
    scaleX = eval(document.getElementById('scaleX').value),
    scaleY = eval(document.getElementById('scaleY').value),
    translateX = eval(document.getElementById('translateX').value),
    translateY = eval(document.getElementById('translateY').value),
    skewX = eval(document.getElementById('skewX').value),
    skewY = eval(document.getElementById('skewY').value);

video1.style.filter = "blur("+blur+"px) brightness("+brightness+"%) contrast("+contrast+"%) hue-rotate("+hueRotate+"deg) grayscale("+grayscale+"%) invert("+invert+"%) saturate("+saturate+"%) sepia("+sepia+"%)";
video1.style.transform = "rotate("+rotate+"deg) scaleX("+scaleX+") scaleY("+scaleY+") skewX("+skewX+"deg) skewY("+skewY+"deg) translateX("+translateX+"px) translateY("+translateY+"px)";

video2.style.filter = "blur("+blur+"px) brightness("+brightness+"%) contrast("+contrast+"%) hue-rotate("+hueRotate+"deg) grayscale("+grayscale+"%) invert("+invert+"%) saturate("+saturate+"%) sepia("+sepia+"%)";
video2.style.transform = "rotate("+rotate+"deg) scaleX("+scaleX+") scaleY("+scaleY+") skewX("+skewX+"deg) skewY("+skewY+"deg) translateX("+translateX+"px) translateY("+translateY+"px)";

},1);
      

navigator.mediaDevices.getUserMedia(constraints).then(handleSuccess).catch(handleError)
  </script>
</body>
</html>
